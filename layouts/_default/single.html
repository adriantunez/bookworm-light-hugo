{{ define "main"}}

<!-- checking blog -->
{{ if or (eq .Section "post") (eq .Section "posts") (eq .Section "blog") (eq .Section "blogs") (eq .Section "news") (eq .Section "categories") (eq .Section "tags") }}

<section class="section-sm">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="text-center mb-5">
          {{ with .Params.image }}
          <div class="mb-3 text-center">
            {{ partial "image.html" (dict "Src" . "Class" "img-fluid rounded" "Alt" "Post image") }}
          </div>
          {{ end }}
        </div>
            <h1 class="h4 mb-2 post-title">{{.Title}}</h1>
            <ul class="card-meta list-inline mb-3">
              <li class="list-inline-item">
                {{ if .Params.author }}
                <a href="#!" class="card-meta-author">
                  {{ with .Site.GetPage (.Params.author | urlize | lower) }}
                  <a href="{{.Permalink}}" class="card-meta-author">
                    {{if .Params.image}}
                      {{ partial "image.html" (dict "Src" .Params.image "Size" "26x26" "Class" "w-auto" "Alt" .Title) }}
                    {{else}}
                    {{ partial "image.html" (dict "Src" "images/authors/unknown.png" "Size" "26x26" "Class" "w-auto" "Alt" .Title) }}
                    {{end}}
                    <span>{{.Title}}</span>
                  </a>
                  {{ end }}
                </a>
                {{ else }}
                  <span>{{.Site.Params.Author}}</span>
                {{ end }}
              </li>
              <li class="list-inline-item">|</li>
              <li class="list-inline-item">
                <span>{{.PublishDate.Format "02 January 2006"}}</span>
              </li>
            </ul>

        <div class="content">
          {{.Content}}
        </div>
      </div>
    </div>

    <div class="single-post-meta">
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-6 text-center text-md-left">
          <ul class="post-meta-tags list-unstyled list-inline">
            {{range .Params.tags}}
            <li class="list-inline-item"><a href="{{`tags` | absURL}}/{{.| urlize}}">{{.}}</a></li>
            {{end}}
          </ul>
        </div>
        <div class="col-lg-5 col-md-6 text-center text-md-right mt-4 mt-md-0">
          {{- partial "post-share.html" . -}}
        </div>
      </div>
    </div>

    {{ if .Params.Author }}
      <div class="single-post-author">
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div class="media d-block d-sm-flex text-sm-left">
              {{ with .Site.GetPage (.Params.Author | urlize | lower) }}
              <a href="{{.Permalink}}">
                {{if .Params.image}}
                  {{ partial "image.html" (dict "Src" .Params.image "Size" "150x150" "Class" "img-fluid rounded-circle mr-0 mr-sm-4 mb-4" "Alt" .Title) }}
                {{else}}
                  {{ partial "image.html" (dict "Src" "images/authors/unknown.png" "Size" "150x150" "Class" "img-fluid rounded-circle mr-0 mr-sm-4 mb-4" "Alt" .Title) }}
                {{end}}
              </a>
              <div class="media-body">
                <p class="font-primary mb-1">Written By</p>
                <h5 class="text-dark mb-0"><a href="{{.Permalink}}" class="text-dark font-weight-700">{{.Title}}</a></h5>
                <p class="font-primary">{{ .Params.caption.title | markdownify }}</p>
                {{ if .Params.social.enable }}
                {{ with .Params.social }}
                <ul class="social-links list-unstyled list-inline ml-0 ml-sm-n2">
                  {{ range .social_links }}
                  <li class="list-inline-item"><a href="{{.link | safeURL}}">
                      <i class="lab {{.icon}}"></i>
                    </a></li>
                  {{end}}
                </ul>
                {{end}}
                {{end}}
              </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    {{ end }}

    {{ if site.Params.giscuss.enable }}
      <script src="https://giscus.app/client.js"
        data-repo="adriantunez/adriantunez.cloud"
        data-repo-id="R_kgDONQbdQw"
        data-category="General"
        data-category-id="DIC_kwDONQbdQ84CkfQz"
        data-mapping="url"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="noborder_light"
        data-lang="es"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
      </script>
    {{end}}

    {{ $related := (where site.RegularPages "Section" "blog") | intersect (where site.Pages ".Title" "!=" .Title) | union (site.RegularPages.Related . ) }}
    {{ if $related }}
      <div class="single-post-similer">
        <div class="row justify-content-center">
          <div class="col-lg-10">
            <div class="row mt-3">
              <div class="col-10">
                <h4 class="mb-4 pb-2">You May Also Like</h4>
              </div>            
                {{ range first 2 $related }}
              <div class="col-md-10">
                {{ .Render "post" }}
              </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    {{ end }}
  </div>
</section>

{{ else }}

<section class="section-sm">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        <div class="content">
          {{.Content}}
        </div>
      </div>
    </div>
  </div>
</section>

{{ end }}

{{ end }}